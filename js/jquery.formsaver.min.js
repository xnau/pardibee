(function(d){function e(f,g){var h=function(a){return"formdata__$url__$extra".replace("$url",location.pathname).replace("$extra",a.attr("id")||"")}(g),e={save:function(){this._save(h,this.extractValues())},restore:function(){this.fillFields(this._load(h))},clear:function(){this._remove(h)},extractValues:function(){var a=g.find(":input[name]").serializeArray(),c={};d.each(a,function(b,a){b=a.name;a=encodeURIComponent(a.value);c[b]=c[b]?c[b]instanceof Array?c[b].concat(a):[c[b],a]:a});return c},fillFields:function(a){d.each(a,
function(a,b){a=g.find("[name="+a+"]");var c=a.prop("type");b=b instanceof Array?b.map(decodeURIComponent):decodeURIComponent(b);"checkbox"===c?a.prop("checked","on"===b):"radio"===c?a.filter("[value="+b+"]").prop("checked",!0):a.val(b)})},_save:function(a,c){localStorage[a]=JSON.stringify(c)},_load:function(a){return localStorage[a]?JSON.parse(localStorage[a]):{}},_remove:function(a){localStorage.removeItem(a)}};d.each(f instanceof Array?f:[f],function(a,c){e[c]()})}d.fn.saveForm=function(){e("save",
d(this))};d.fn.restoreForm=function(){e(["restore","clear"],d(this))}})(jQuery);