var PDbListAdmin=function(b){var e=!1,f=b("#list_form"),k=b("#select_count"),g=b("#apply_button").prop("disabled",!0).addClass("unarmed"),l=b("#checkall"),w=b('<input type="hidden" name="submit-button" />'),h=b("[name=with_selected]"),p=b("select[name^=operator]"),q,m=function(a){g.attr("class",a?g.attr("class").replace("unarmed","armed"):g.attr("class").replace("armed","unarmed")).prop("disabled",a?!1:!0)},r=function(a){var b=k.val();!0===a?(l.prop("checked",f.find(".delete-check:not(:checked)").length?
!1:!0),b++):(l.prop("checked",!1),b--);0>b&&(b=0);m(0<b);k.val(b)},x=function(){!1===e?e=!0:(e=!1,m(!1));f.find(".delete-check").each(function(){b(this).prop("checked",e);r(e)})},u=function(a){a=a.target?b(a.target):b(a);var c=a.closest(".list-controls").find(".mass-edit-control"),d=a.closest(".list-controls").find(".file-delete-preference-selector");switch(a.val()){case mass_editL10n.edit_action:d.hide(300);t(a);c.show(300);break;case "delete":d.show(300);c.hide(300);break;default:c.hide(300),d.hide(300)}},
t=function(a){var c=(a.target?b(a.target):b(a)).closest(".list-controls"),d=c.find(".mass-edit-input");d.find(".field-input-label, .field-input").fadeTo(300,0,function(){d.addClass("changeout")});d.append(q);a={action:mass_editL10n.action};c=c.find('[name="'+mass_editL10n.selector+'"]').val();a[mass_editL10n.selector]=c;a[c]=b(".mass-edit-input [name="+c+"]").val();b.post(ajaxurl,a,function(a){d.html(a.input);d.find(".field-input-label, .field-input").fadeTo(300,1);d.removeClass("changeout");PDbOtherSelect.init();
"undefined"!==typeof PDbDatepicker&&PDbDatepicker.init()})},n=b("<div/>").dialog({dialogClass:"confirmation-dialog participants-database-confirm",modal:!0,zIndex:1E4,autoOpen:!1,width:"auto",resizable:!1,buttons:[{icon:"dashicons dashicons-yes",click:function(){f.prepend(w.clone().val(list_adminL10n.apply));m(!0);e=!1;if("export"===h.val()){var a=b("form.csv-export"),c=new FormData(f[0]);a.find("[name=export_selection]").length?a.find("[name=export_selection]").val(c.getAll("pid[]").toString()):a.prepend(b("<input>",
{type:"hidden",name:"export_selection",value:c.getAll("pid[]").toString()}));a.submit();n.dialog("close").html("")}else f.submit(),n.dialog("destroy")}},{icon:"dashicons dashicons-no-alt",click:function(){e=!0;b(this).dialog("close").html("")}}]}),v=function(a){a=a.target?b(a.target):b(a);var c=a.closest(".filter-search-term").find("input[name^=value]");a.val()===list_adminL10n.dupcheck?c.val("").hide():c.show()};return{init:function(){g.on("click",function(a){a.preventDefault();var c=parseInt(k.val(),
10);a=1<c?"plural":"singular";var d=h.val();c=!list_adminL10n.unlimited_actions.includes(d)&&c>parseInt(list_adminL10n.send_limit)?b('<h4 class="dashicons-before dashicons-warning"/>').append(list_adminL10n.apply_confirm.recipient_count_exceeds_limit.replace("{limit}",list_adminL10n.send_limit)):"";n.append(b("<h3/>").append(list_adminL10n.apply_confirm[d][a])).append(c).dialog("open").find("a").blur()});q=mass_editL10n.spinner;h.on("change",u);u(h);p.on("change",v);v(p);b('[name="'+mass_editL10n.selector+
'"]').on("change",t);l.click(x);b(".delete-check").on("click",function(){r(b(this).prop("checked"))});b("#list_filter_count").change(b.debounce(500,function(){b(this).closest("form").submit()}))}}}(jQuery);jQuery(function(){PDbListAdmin.init()});