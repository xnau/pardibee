var PDbListAdmin=function(a){var e=!1,f=a("#list_form"),h=a("#select_count"),g=a("#apply_button").prop("disabled",!0).addClass("unarmed"),k=a("#checkall"),t=a('<input type="hidden" name="submit-button" />'),m=a("#pdb-with_selected-1"),n,l=function(a){g.attr("class",a?g.attr("class").replace("unarmed","armed"):g.attr("class").replace("armed","unarmed")).prop("disabled",a?!1:!0)},p=function(a){var b=h.val();!0===a?(k.prop("checked",f.find(".delete-check:not(:checked)").length?!1:!0),b++):(k.prop("checked",
!1),b--);0>b&&(b=0);l(0<b);h.val(b)},u=function(){!1===e?e=!0:(e=!1,l(!1));f.find(".delete-check").each(function(){a(this).prop("checked",e);p(e)})},r=function(c){c=c.target?a(c.target):a(c);var b=c.closest(".list-controls").find(".mass-edit-control"),d=c.closest(".list-controls").find(".file-delete-preference-selector");b.hide(300);d.hide(300);switch(c.val()){case mass_editL10n.edit_action:b.show(300);q(c);break;case "delete":d.show(300)}},q=function(c){c=(c.target?a(c.target):a(c)).closest(".list-controls");
var b=c.find(".mass-edit-input");b.find(".field-input-label, .field-input").fadeTo(300,0,function(){b.addClass("changeout")});b.append(n);var d={action:mass_editL10n.action};d[mass_editL10n.selector]=c.find('[name="'+mass_editL10n.selector+'"]').val();a.post(ajaxurl,d,function(a){b.html(a.input);b.find(".field-input-label, .field-input").fadeTo(300,1);b.removeClass("changeout");PDbOtherSelect.init();PDbDatepicker&&PDbDatepicker.init()})},v=a("<div/>").dialog({dialogClass:"confirmation-dialog participants-database-confirm",
modal:!0,zIndex:1E4,autoOpen:!1,width:"auto",resizable:!1,buttons:[{icon:"dashicons dashicons-yes",click:function(){f.prepend(t.clone().val(list_adminL10n.apply));l(!0);e=!1;a(this).dialog("destroy");f.submit()}},{icon:"dashicons dashicons-no-alt",click:function(){e=!0;a(this).dialog("close").html("")}}]});return{init:function(){g.on("click",function(c){c.preventDefault();var b=parseInt(h.val(),10);c=1<b?"plural":"singular";var d=a("[name=with_selected]").val();b=!list_adminL10n.unlimited_actions.includes(d)&&
b>parseInt(list_adminL10n.send_limit)?a('<h4 class="dashicons-before dashicons-warning"/>').append(list_adminL10n.apply_confirm.recipient_count_exceeds_limit.replace("{limit}",list_adminL10n.send_limit)):"";v.append(a("<h3/>").append(list_adminL10n.apply_confirm[d][c])).append(b).dialog("open").find("a").blur()});n=mass_editL10n.spinner;m.on("change",r);r(m);a('[name="'+mass_editL10n.selector+'"]').on("change",q);k.click(u);a(".delete-check").on("click",function(){p(a(this).prop("checked"))});a("#list_filter_count").change(a.debounce(500,
function(){a(this).closest("form").submit()}))}}}(jQuery);jQuery(function(){PDbListAdmin.init()});