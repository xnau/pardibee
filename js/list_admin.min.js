var PDbListAdmin=function(a){var b=!1,d=a("#list_form"),f=a("#select_count"),e=a("#apply_button").prop("disabled",!0).addClass("unarmed"),g=a("#checkall"),l=a('<input type="hidden" name="submit-button" />'),h=function(a){e.attr("class",a?e.attr("class").replace("unarmed","armed"):e.attr("class").replace("armed","unarmed")).prop("disabled",a?!1:!0)},k=function(a){var c=f.val();!0===a?(g.prop("checked",d.find(".delete-check:not(:checked)").length?!1:!0),c++):(g.prop("checked",!1),c--);0>c&&(c=0);h(0<
c);f.val(c)},m=function(){!1===b?b=!0:(b=!1,h(!1));d.find(".delete-check").each(function(){a(this).prop("checked",b);k(b)})},n=a("<div/>").dialog({dialogClass:"confirmation-dialog participants-database-confirm",modal:!0,zIndex:1E4,autoOpen:!1,width:"auto",resizable:!1,buttons:[{icons:{primary:"dashicons dashicons-yes ui-icon-check"},click:function(){d.prepend(l.clone().val(list_adminL10n.apply));h(!0);b=!1;a(this).dialog("destroy");d.submit()}},{icons:{primary:"dashicons dashicons-no-alt ui-icon-close"},
click:function(){b=!0;a(this).dialog("close").html("")}}]});return{init:function(){e.on("click",function(b){b.preventDefault();var c=parseInt(f.val(),10);b=1<c?"plural":"singular";var d=a("[name=with_selected]").val();c=!list_adminL10n.unlimited_actions.includes(d)&&c>parseInt(list_adminL10n.send_limit)?a('<h4 class="dashicons-before dashicons-warning"/>').append(list_adminL10n.apply_confirm.recipient_count_exceeds_limit.replace("{limit}",list_adminL10n.send_limit)):"";n.append(a("<h3/>").append(list_adminL10n.apply_confirm[d][b])).append(c).dialog("open").find("a").blur()});
g.click(m);a(".delete-check").on("click",function(){k(a(this).prop("checked"))});a("#list_filter_count").change(a.debounce(500,function(){a(this).closest("form").submit()}))}}}(jQuery);jQuery(function(){PDbListAdmin.init()});