var PDbListAdmin=function(a){var d=!1,e=a("#list_form"),g=a("#select_count"),f=a("#apply_button").prop("disabled",!0).addClass("unarmed"),h=a("#checkall"),q=a('<input type="hidden" name="submit-button" />'),l=a("#pdb-with_selected-1"),m,k=function(a){f.attr("class",a?f.attr("class").replace("unarmed","armed"):f.attr("class").replace("armed","unarmed")).prop("disabled",a?!1:!0)},n=function(a){var b=g.val();!0===a?(h.prop("checked",e.find(".delete-check:not(:checked)").length?!1:!0),b++):(h.prop("checked",
!1),b--);0>b&&(b=0);k(0<b);g.val(b)},r=function(){!1===d?d=!0:(d=!1,k(!1));e.find(".delete-check").each(function(){a(this).prop("checked",d);n(d)})},p=function(c){c=c.target?a(c.target):a(c);var b=c.closest(".list-controls").find(".mass-edit-control");c.val()===mass_editL10n.edit_action?b.show(300):b.hide(300)},t=function(){var c=a(this).closest(".list-controls"),b=c.find(".mass-edit-input");b.find(".field-input-label, .field-input").fadeTo(300,0,function(){b.addClass("changeout")});b.append(m);c=
c.find('[name="'+mass_editL10n.selector+'"]').val();var d={action:mass_editL10n.action};d[mass_editL10n.selector]=c;a.post(ajaxurl,d,function(a){b.html(a.input);b.find(".field-input-label, .field-input").fadeTo(300,1);b.removeClass("changeout")})},u=a("<div/>").dialog({dialogClass:"confirmation-dialog participants-database-confirm",modal:!0,zIndex:1E4,autoOpen:!1,width:"auto",resizable:!1,buttons:[{icon:"dashicons dashicons-yes",click:function(){e.prepend(q.clone().val(list_adminL10n.apply));k(!0);
d=!1;a(this).dialog("destroy");e.submit()}},{icon:"dashicons dashicons-no-alt",click:function(){d=!0;a(this).dialog("close").html("")}}]});return{init:function(){f.on("click",function(c){c.preventDefault();var b=parseInt(g.val(),10);c=1<b?"plural":"singular";var d=a("[name=with_selected]").val();b=!list_adminL10n.unlimited_actions.includes(d)&&b>parseInt(list_adminL10n.send_limit)?a('<h4 class="dashicons-before dashicons-warning"/>').append(list_adminL10n.apply_confirm.recipient_count_exceeds_limit.replace("{limit}",
list_adminL10n.send_limit)):"";u.append(a("<h3/>").append(list_adminL10n.apply_confirm[d][c])).append(b).dialog("open").find("a").blur()});l.on("change",p);p(l);a('[name="'+mass_editL10n.selector+'"]').on("change",t);m=mass_editL10n.spinner;h.click(r);a(".delete-check").on("click",function(){n(a(this).prop("checked"))});a("#list_filter_count").change(a.debounce(500,function(){a(this).closest("form").submit()}))}}}(jQuery);jQuery(function(){PDbListAdmin.init()});