PDbListFilter=function(b){var g=!1,k,l,m,c,h=function(a,e){e=e||!1;a.preventDefault?a.preventDefault():a.returnValue=!1;var d=b(a.target).closest("div[id^=participants-list-], .pdb-search");k=d.find(".pdb-searchform .pdb-error");l=d.find('.sort_filter_form[data-ref="update"]');m=d.find('.sort_filter_form[data-ref="remote"]');n();d=b(a.target);d=d.is("a")?d:d.closest("a");a=b(a.target);var q=a.closest("."+PDb_ajax.prefix+"searchform").find(".search_field_error"),h=a.closest("."+PDb_ajax.prefix+"searchform").find(".value_error");
c.target_instance=c.instance_index||"";c.submit=a.data("submit");switch(c.submit){case "search":c.listpage="1";b('[name^="search_field"]').PDb_checkInputs("none")&&(q.show(),g=!0);!PDb_ajax.allow_empty_term&&b('[name^="value"]').PDb_checkInputs("")&&(h.show(),g=!0);if(g){k.show();return}break;case "clear":b('select[name^="search_field"]').PDb_clearInputs("none");b('input[name^="value"]').PDb_clearInputs("");n();c.listpage="1";break;case "page":c.action=d.closest("div").data("action");c.listpage=d.data("page");
break;case "sort":break;default:return}e?"clear"!==c.submit&&(a.closest("form").append(b("<input>",{type:"hidden",name:"submit_button",value:a.val()})),a.closest("form").submit()):(a.PDb_processSubmission(),b("html").trigger("pdbListFilterComplete"))},r=function(a){h(a,!0)},t=function(a){b(a.target).data("submit","page");var e=b(a.target).closest(".wrap.pdb-list").prop("class").match(/pdb-instance-(\d+)/);c.instance_index=e[1];h(a)},n=function(){k.hide().children().hide();g=!1},u=function(){var a=
b("#participants-list-"+c.instance_index);a.length&&a.height()>b(window).innerHeight()&&b("html, body").animate({scrollTop:a.offset().top},500)},p=function(a,b){var d=encodeURI(a.val());a=a.attr("name");var c=a.match(/\[\]$/);a=a.replace("[]","");c&&"string"===typeof b[a]&&(b[a]=[b[a]]);"object"===typeof b[a]?b[a][b[a].length]=d:b[a]=d},v=function(a){var e=b(".pdb-list.pdb-instance-"+c.instance_index),d=e.length?e:b(".pdb-list").first(),h=d.find(".pdb-pagination"),g=a.closest("fieldset, div"),k=b(PDb_ajax.loading_indicator).clone();
b.ajax({type:"POST",url:PDb_ajax.ajaxurl,data:c,beforeSend:function(){h.find("a").prop("disabled",!0);g.append(k);delete c.search_field;delete c.value;delete c.operator},success:function(e,f){if(/^failed/.test(e))switch(f=c.submit,f){case "page":f=document.createElement("a");f.href=window.location.href;window.location.href=f.protocol+"//"+f.hostname+a.attr("href");break;default:l.append('<input type="hidden" name="submit_button" value="'+f+'" /> ').submit()}e=b(e);f=e.find(".pdb-pagination");var g=
e.find(".list-container").length?e.find(".list-container"):e;e.PDb_idFix();g.find("a.obfuscate[data-email-values]").each(function(){b(this).PDb_email_obfuscate()});d.find(".list-container").replaceWith(g);h.remove();f.length&&f.each(function(){(d.find(".list-container + .pdb-pagination").length?d.find(".list-container + .pdb-pagination").last():d.find(".list-container")).after(this)});k.remove();h.find("a").prop("disabled",!1);b("html").trigger("pdbListAjaxComplete")},error:function(a,b,c){console.log("Participants Database JS error status:"+
b+" error:"+c)}})};b.fn.PDb_idFix=function(){this.find("#pdb-list").addClass("list-container").removeAttr("id");this.find("#sort_filter_form").addClass("sort_filter_form").removeAttr("id")};b.fn.PDb_checkInputs=function(a){var c=this.length,d=0;this.each(function(){b(this).val()===a&&d++});return d===c};b.fn.PDb_clearInputs=function(a){this.each(function(){b(this).val(a)})};b.fn.PDb_processSubmission=function(){var a=this.closest("form");a.length||(a=this.closest(".pdb-list").find(".sort_filter_form"));
a.find('input:not(input[type="submit"],input[type="radio"]), select').each(function(){p(b(this),c)});a.find('input[type="radio"]:checked').each(function(){p(b(this),c)});v(this)};return{run:function(){k=b(".pdb-searchform .pdb-error");l=b('.sort_filter_form[data-ref="update"]');m=b('.sort_filter_form[data-ref="remote"]');c={filterNonce:PDb_ajax.filterNonce,postID:PDb_ajax.postID};"undefined"===typeof PDb_ajax.prefix&&(PDb_ajax.prefix="pdb-");b(".wrap.pdb-list").PDb_idFix();n();l.on("click",'[type="submit"]',
h);m.on("click",'[type="submit"]',r);b(".pdb-list").on("click",".pdb-pagination a",t);b("html").on("pdbListAjaxComplete",u)}}}(jQuery);jQuery(function(){PDbListFilter.run()});