var PDbOtherSelect=function(d){var l=function(){var a=d(this),b=a.closest('[class*="-other-control-group"]'),c=b.data("other-name"),e=b.find(".otherfield");f(e);"other"===a.val()?(b.find(".otherselect").attr("name","temp"),e.attr("name",c).select(),g(e)):(b.find(".otherselect").attr("name",c),e.attr("name","temp").val(""))},m=function(){var a=d(this).closest('[class*="-other-control-group"]'),b=a.data("other-name");a.find(".otherfield").attr("name",b);a.find(".otherselect option:selected").removeAttr("selected").end().find(".otherselect option[value=other]").prop("selected",
!0).end().find("select.otherselect").attr("name","temp");return!0},n=function(){h(d(this))},p=function(){return k(d(this))},q=function(){h(d(this))},r=function(){return k(d(this))},g=function(a){a.data("fieldvalue")&&a.attr("value",a.data("fieldvalue"))},f=function(a){var b=a.val();""!==b&&a.data("fieldvalue",b)},h=function(a){var b=a.closest('[class*="-other-control-group"]'),c=b.data("other-name").replace("[]","")+(a.PDb_is_checkbox()?"[other]":"");b=b.find(".otherfield");f(b);a.is(":checked")&&
a.hasClass("otherselect")?(g(b),b.attr("name",c),b.focus()):b.attr("name","temp").val("")},k=function(a){var b=a.closest('[class*="-other-control-group"]'),c=b.data("other-name");a.is(":focus")&&(a.prop("name",c.replace("[]","")+(a.PDb_is_checkbox()?"[other]":"")),b.find(".otherselect").prop("checked",!0),a.focus());return!0},t=function(){var a=d(this),b=a.find("[name]").first().attr("name"),c=a.find("input.otherfield");c.length&&(a.data("other-name",b),c.attr("name",c.attr("name").replace(b,"temp")))};
d.fn.PDb_is_checkbox=function(){return 0<this.closest('.selectother[class*="checkbox"]').length};return{init:function(){var a=d("div.dropdown-other-control-group"),b=d("div.checkbox-other-control-group"),c=d("div.radio-other-control-group");d("[class*=other-control-group]").each(t);a.on("change","select.otherselect",l);a.on("click","input.otherfield",m);a.find(".otherselect").trigger("change");b.on("change","input.otherselect",n);b.on("click","input.otherfield",p);b.find(".otherselect").trigger("change");
c.on("change",'input[type="radio"]',q);c.on("click","input.otherfield",r);c.find(".otherselect").trigger("change")}}}(jQuery);jQuery(function(){PDbOtherSelect.init()});